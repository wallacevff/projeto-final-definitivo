<section class="class-groups">
  <header>
    <div>
      <h2>Turmas e inscricoes</h2>
      <p class="description">Acompanhe o andamento das turmas e a taxa de ocupacao por curso.</p>
    </div>
    <button type="button">Criar turma</button>
  </header>

  <ng-container *ngIf="!loading(); else loadingState">
    <ng-container *ngIf="!error(); else errorState">
      <div class="table-wrapper" *ngIf="classGroups().length; else emptyState">
        <table>
          <thead>
            <tr>
              <th>Turma</th>
              <th>Curso</th>
              <th>Vagas</th>
              <th>Requer aprovacao?</th>
              <th>Status</th>
              <th>Proximo evento</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let group of classGroups(); trackBy: trackByGroupId" [attr.data-status]="group.status">
              <td>
                <span class="title">{{ group.name }}</span>
              </td>
              <td>
                <span class="course">{{ group.courseTitle }}</span>
              </td>
              <td>
                <span>{{ group.occupied }} / {{ group.capacity }}</span>
              </td>
              <td>
                <span class="badge" [class.badge--accent]="group.requiresApproval">{{ group.requiresApproval ? 'Sim' : 'Nao' }}</span>
              </td>
              <td>
                <span class="status">{{ group.status }}</span>
              </td>
              <td>
                <span class="meta">{{ group.nextEvent }}</span>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </ng-container>
  </ng-container>
</section>

<ng-template #loadingState>
  <div class="state state--info">Carregando turmas...</div>
</ng-template>

<ng-template #errorState>
  <div class="state state--error">{{ error() }}</div>
</ng-template>

<ng-template #emptyState>
  <div class="state state--info">Nenhuma turma cadastrada ate o momento.</div>
</ng-template>
