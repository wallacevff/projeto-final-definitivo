import{a as R}from"./chunk-E66WUFVC.js";import{a as E,b as D,c as w,d as L}from"./chunk-LIHITQLG.js";import{b as S}from"./chunk-PD3M4KJI.js";import{g as I,h as M,k as O}from"./chunk-TDWUSEOQ.js";import{Gb as v,Ia as o,N as A,T as d,Ta as h,Xa as l,ea as P,fb as m,jb as n,kb as i,m as y,ma as g,mb as _,nb as x,q as C,tb as p,x as b,xb as f,yb as r,zb as s}from"./chunk-IFOETVGF.js";function T(e){let{items:a}=w(e);return a.map(t=>({id:t.Id,title:t.Title,dueDateLabel:R(t.DueDate,{day:"2-digit",month:"short",hour:"2-digit",minute:"2-digit"}),courseId:t.CourseId,audiences:(t.Audiences??[]).map(c=>c.ClassGroupName||"Turma sem nome"),allowLate:t.AllowLateSubmissions,attachments:t.Attachments?.length??0}))}var u=class e{http=d(S);baseUrl=D.baseUrl;getActivities(){let a=L({PageSize:50});return this.http.get(`${this.baseUrl}/activities`,{params:a}).pipe(b(()=>y({dados:[]})),C(T))}static \u0275fac=function(t){return new(t||e)};static \u0275prov=A({token:e,factory:e.\u0275fac,providedIn:"root"})};function N(e,a){if(e&1&&(n(0,"article",10)(1,"div",11)(2,"h3"),r(3),i(),n(4,"span",12),r(5),i()(),n(6,"dl")(7,"div")(8,"dt"),r(9,"Prazo"),i(),n(10,"dd"),r(11),i()(),n(12,"div")(13,"dt"),r(14,"Turmas"),i(),n(15,"dd"),r(16),i()(),n(17,"div")(18,"dt"),r(19,"Anexos"),i(),n(20,"dd"),r(21),i()()(),n(22,"footer")(23,"button",5),r(24,"Ver detalhes"),i(),n(25,"button",13),r(26,"Gerenciar correcoes"),i()()()),e&2){let t=a.$implicit;o(3),s(t.title),o(2),s(t.allowLate?"Aceita atrasos":"Sem prorrogacao"),o(6),s(t.dueDateLabel),o(5),s(t.audiences.length?t.audiences.join(", "):"Disponivel para todos"),o(5),s(t.attachments)}}function j(e,a){if(e&1&&(n(0,"div",8),l(1,N,27,5,"article",9),i()),e&2){let t=p(3);o(),m("ngForOf",t.activities())("ngForTrackBy",t.trackByActivity)}}function B(e,a){if(e&1&&(_(0),l(1,j,2,2,"div",7),x()),e&2){let t=p(2),c=f(15);o(),m("ngIf",t.activities().length)("ngIfElse",c)}}function G(e,a){if(e&1&&(_(0),l(1,B,2,2,"ng-container",6),x()),e&2){let t=p(),c=f(13);o(),m("ngIf",!t.error())("ngIfElse",c)}}function U(e,a){e&1&&(n(0,"div",14),r(1,"Carregando atividades..."),i())}function H(e,a){if(e&1&&(n(0,"div",15),r(1),i()),e&2){let t=p();o(),s(t.error())}}function V(e,a){e&1&&(n(0,"div",14),r(1,"Nenhuma atividade cadastrada por enquanto."),i())}var k=class e{service=d(u);destroyRef=d(P);loading=g(!0);error=g(null);activities=g([]);constructor(){this.service.getActivities().pipe(E(this.destroyRef)).subscribe({next:a=>{this.activities.set(a),this.error.set(null),this.loading.set(!1)},error:()=>{this.error.set("Nao foi possivel carregar as atividades."),this.loading.set(!1)}})}trackByActivity(a,t){return t.id}static \u0275fac=function(t){return new(t||e)};static \u0275cmp=h({type:e,selectors:[["app-activities"]],decls:16,vars:2,consts:[["loadingState",""],["errorState",""],["emptyState",""],[1,"activities"],[1,"description"],["type","button"],[4,"ngIf","ngIfElse"],["class","activities__list",4,"ngIf","ngIfElse"],[1,"activities__list"],["class","activity",4,"ngFor","ngForOf","ngForTrackBy"],[1,"activity"],[1,"activity__meta"],[1,"tag"],["type","button",1,"secondary"],[1,"state","state--info"],[1,"state","state--error"]],template:function(t,c){if(t&1&&(n(0,"section",3)(1,"header")(2,"div")(3,"h2"),r(4,"Atividades avaliativas"),i(),n(5,"p",4),r(6,"Organize prazos e acompanhe a distribuicao das atividades por turma."),i()(),n(7,"button",5),r(8,"Criar atividade"),i()(),l(9,G,2,2,"ng-container",6),i(),l(10,U,2,0,"ng-template",null,0,v)(12,H,2,1,"ng-template",null,1,v)(14,V,2,0,"ng-template",null,2,v)),t&2){let z=f(11);o(9),m("ngIf",!c.loading())("ngIfElse",z)}},dependencies:[O,I,M],styles:[".activities[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1.5rem}.activities[_ngcontent-%COMP%]   header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap;gap:1rem}.activities[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{margin:0;font-size:1.6rem;color:var(--surface-900)}.activities[_ngcontent-%COMP%]   header[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:.65rem 1.4rem;border-radius:999px;border:0;background:var(--accent-500);color:#fff;font-weight:600;cursor:pointer}.activities__list[_ngcontent-%COMP%]{display:grid;gap:1rem}.activity[_ngcontent-%COMP%]{background:#fffffff2;border-radius:20px;padding:1.5rem;box-shadow:0 18px 48px -40px #0f172a8c;border:1px solid rgba(99,102,241,.1);display:grid;gap:1.25rem}.activity__meta[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;flex-wrap:wrap;gap:.75rem}.activity__meta[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;font-size:1.2rem;color:var(--surface-900)}.tag[_ngcontent-%COMP%]{padding:.35rem .75rem;border-radius:999px;background:#26c0ab26;color:#0f766e;font-size:.8rem;text-transform:uppercase;letter-spacing:.08em}dl[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(180px,1fr));gap:1rem;margin:0}dl[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{display:grid;gap:.25rem}dt[_ngcontent-%COMP%]{font-size:.8rem;text-transform:uppercase;letter-spacing:.08em;color:var(--surface-500)}dd[_ngcontent-%COMP%]{margin:0;font-size:.95rem;color:var(--surface-700)}footer[_ngcontent-%COMP%]{display:flex;gap:.75rem;flex-wrap:wrap}footer[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{border:none;padding:.65rem 1.25rem;border-radius:12px;cursor:pointer;font-weight:600}footer[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:first-of-type{background:#6366f129;color:var(--accent-600)}footer[_ngcontent-%COMP%]   button.secondary[_ngcontent-%COMP%]{background:#94a3b82e;color:var(--surface-600)}@media (max-width: 580px){.activities[_ngcontent-%COMP%]   header[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start}footer[_ngcontent-%COMP%]{width:100%}footer[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{flex:1 1 100%}}.activities[_ngcontent-%COMP%]   .description[_ngcontent-%COMP%]{margin:.25rem 0 0;color:var(--surface-500);font-size:.95rem}.state[_ngcontent-%COMP%]{padding:1.5rem;border-radius:16px;text-align:center;font-weight:500;background:#94a3b826;color:var(--surface-600)}.state--error[_ngcontent-%COMP%]{background:#f871712e;color:#b91c1c}"],changeDetection:0})};export{k as ActivitiesComponent};
